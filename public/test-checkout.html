<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Test Checkout Lemon</title>
  <style>
    body {
      background-color: #111;
      color: #f3f3f3;
      font-family: 'Crimson Pro', serif;
      text-align: center;
      padding: 40px;
    }
    button {
      padding: 14px 24px;
      background-color: #d4af37;
      color: #000;
      border: none;
      border-radius: 10px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 30px;
    }
    button:hover {
      background-color: #e6c75f;
    }
  </style>
</head>
<body>

<h1>Test Checkout - Codex Hermético</h1>

<button onclick="comprarBasico()">Comprar Interpretación Básica</button>
<br/><br/>
<button onclick="comprarTodo()">Comprar Interpretación + HD + Videos</button>

<script>
  async function comprarBasico() {
    await lanzarCheckout([779483]);
  }

  async function comprarTodo() {
    await lanzarCheckout([779483, 779523, 779524]);
  }

  async function lanzarCheckout(variants) {
    try {
      const response = await fetch('/api/checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ variants }),
      });

      const { checkoutUrl } = await response.json();

      if (checkoutUrl) {
        window.location.href = checkoutUrl;
      } else {
        alert('No se pudo iniciar el checkout.');
      }
    } catch (error) {
      console.error('Error en checkout:', error);
      alert('Error interno.');
    }
  }
</script>

</body>
</html>
